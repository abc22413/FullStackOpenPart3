{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseURL","axios","get","then","response","data","newPerson","post","id","delete","put","AddPersonForm","props","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","onClick","addPerson","FilterForm","filter","handleFilterChange","Record","person","handler","name","number","Notification","message","good","NotifStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","filteredPersons","setFilteredPersons","errorMessage","setErrorMessage","useEffect","personService","initalPersons","filterVal","toLowerCase","includes","flter","event","target","preventDefault","setTimeout","map","window","confirm","oldPerson","find","n","updatedPerson","catch","error","concat","key","rmvPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fc07e7b7.chunk.js","sourcesContent":["import axios from 'axios'\n//const baseURL = \"https://learn-phonebook.herokuapp.com/api/persons\"\nconst baseURL = \"./api/persons\"\n\nconst getAll = () => {\n  const request = axios.get(baseURL)\n  return request.then(response => response.data)\n}\n\nconst create = (newPerson) => {\n  const request = axios.post(baseURL, newPerson)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseURL}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newPerson) => {\n  const request = axios.put(`${baseURL}/${id}`, newPerson)\n  return request.then(response => response.data)\n}\n\nexport default {\n  getAll,\n  create,\n  remove,\n  update\n}","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst AddPersonForm = (props) => {\n  return (\n  <form>\n    <div>name: <input value={props.newName} onChange={props.handleNameChange}/></div>\n    <div>number: <input value={props.newNumber} onChange={props.handleNumberChange}/></div>\n    <div><button type=\"submit\" onClick={props.addPerson}>Add</button></div>\n  </form>\n  )\n}\n\nconst FilterForm = (props) => {\n  return (\n    <div>\n      filter shown with <input value={props.filter} onChange={props.handleFilterChange}/>\n    </div>\n  )\n}\n\nconst Record = ({ person, handler }) => {\n  return (\n    <div>\n    {person.name} {person.number}\n    <button onClick={handler}>Delete</button>\n    </div>\n  )\n}\n\nconst Notification = ({ message, good }) => {\n  let NotifStyle = {\n    color: \"green\",\n    background: \"lightgrey\",\n    fontSize: 20,\n    borderStyle: \"solid\",\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  }\n  if(!message)return null\n  if(!good) {\n    NotifStyle.color = \"red\"\n  }\n  else if (good === true){\n    NotifStyle.color = \"green\"\n  }\n  return (\n    <div style={NotifStyle}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState(\"\")\n  const [newNumber, setNewNumber] = useState(\"\")\n  const [filter, setFilter] = useState(\"\")\n  const [filteredPersons, setFilteredPersons] = useState([])\n  const [errorMessage, setErrorMessage] = useState([null, true])\n\n  //Fetch data from server\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(initalPersons => {\n      setPersons(initalPersons)\n    })\n  }, [])\n\n  //Add person code\n  const addPerson = (event) => {\n    event.preventDefault()\n    //if a field is blank\n    if (!newName || !newNumber) {\n      setErrorMessage([\"Please fill in all blanks!\",false])\n      setTimeout(() => {\n        setErrorMessage([null,\"false\"])\n      }, 5000)\n      return\n    }\n    //if name already inserted\n    if (persons.map(person => person.name).includes(newName)) {\n      if (!window.confirm(`${newName} is already added to phonebook. Replace old number with a new one?`)) return\n      const oldPerson = persons.find(n => n.name === newName)\n      const newPerson = {\n        ...oldPerson,\n        number: newNumber\n      }\n      personService\n      .update(oldPerson.id, newPerson)\n      .then(updatedPerson => {\n        setPersons(persons.map(person => person.name !== newName ? person : updatedPerson))\n        setErrorMessage([`${newName}'s number succesfully updated`, true])\n        setTimeout(() => {\n          setErrorMessage([null, false])\n        }, 5000)\n      })\n      .catch(error => {\n        setErrorMessage([`Update failed, ${newName} was already deleted`, false])\n        setPersons(persons.filter(person => person.name !== newName))\n        setTimeout(() => {\n          setErrorMessage([null, false])\n        }, 5000)\n      })\n      setNewName(\"\")\n      setNewNumber(\"\")\n      return\n    }\n    //if number already exists\n    if (persons.map(person => person.number).includes(newNumber)) {\n      setErrorMessage([`${newNumber} is already added to phonebook`, false])\n      setTimeout(() => {\n        setErrorMessage([null, false])\n      }, 5000)\n      return\n    }\n    //create person object\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n    //Push to server\n    personService\n    .create(personObject)\n    .then(newPerson => {\n      setPersons(persons.concat(newPerson))\n      setErrorMessage([`${newPerson.name} succesfully added`,true])\n      setTimeout(() => {\n        setErrorMessage([null, false])\n      }, 5000)\n    })\n    .catch(error => {\n      setErrorMessage([\"Creation failed, please try again\", false])\n      setTimeout(() => {\n        setErrorMessage([null, false])\n      }, 5000)\n    })\n    //add and reset change vars\n    setNewName(\"\")\n    setNewNumber(\"\")\n  }\n\n  //Delete person code\n  const rmvPerson = (id) => {\n    const person = persons.find(n => n.id === id)\n    if (!window.confirm(`Confirm deletion of ${person.name} ?`)) return\n    personService\n    .remove(id)\n    .then(() => {\n      setPersons(persons.filter(person => person.id !== id))\n      setErrorMessage([`Successfully deleted ${person.name}`,true])\n      setTimeout(() => {\n        setErrorMessage([null, false])\n      }, 5000)\n    })\n    .catch(error => {\n      setErrorMessage([`The person '${person.name}' has already been deleted`,false])\n      setPersons(persons.filter(person => person.id !== id))\n      setTimeout(() => {\n        setErrorMessage([null, false])\n      }, 5000)\n    })\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  //Update filteredPersons when filter or persons changes\n  useEffect(() => {\n    if (!filter) {\n      setFilteredPersons(persons)\n      return\n    }\n    const filterVal = filter.toLowerCase()\n    setFilteredPersons(persons.filter(person => person.name.toLowerCase().includes(filterVal) || person.number.toLowerCase().includes(filterVal)))\n  },[filter, persons])\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  return (\n    <>\n    <h2>Phonebook</h2>\n    <Notification message={errorMessage[0]} good={errorMessage[1]}/>\n    <FilterForm flter={filter} handleFilterChange={handleFilterChange}/>\n    <h2>Add a new</h2>\n    <AddPersonForm newName={newName} handleNameChange={handleNameChange} \n    newNumber={newNumber} handleNumberChange={handleNumberChange} addPerson={addPerson}/>\n    <h2>Numbers</h2>\n    {filteredPersons.map(person => <Record key={person.id} person={person} handler={() => rmvPerson(person.id)} />)}\n    </>\n  )\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById(\"root\"))"],"sourceRoot":""}